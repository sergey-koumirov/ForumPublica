<% define "app/constructions/show.html" %>

<% template "base_head" .%>

<h5>
  <a href="/app/constructions">Constructions</a>
  &gt; [<% .construction.Model.Id %>]
</h5>

<div id="construction" class="construction" construction="<% .construction | Marshal %>" v-cloak>

    <img v-if="isLoading" class="loading" width="48" height="48" src="/assets/images/loading.gif">

    <div class="columns">
        <div class="bordered">
            <% template "app/constructions/_bpos.html" . %>
        </div>

        <div class="bordered">
            [% template "constructions/_components.html" . %]
        </div>

        <div class="w100p">
            <div class="bordered w100p">
                [% template "constructions/_store.html" . %]
            </div>
            <div class="bordered w100p">
                [% template "constructions/_materials.html" . %]
            </div>
            <div class="bordered w100p">
                [% template "constructions/_expenses.html" . %]
            </div>
        </div>
    </div>

    [% template "constructions/_store_modal.html" . %]
    [% template "constructions/_ask_number_modal.html" . %]
    [% template "constructions/_ask_bpo_runs_modal.html" . %]
    [% template "constructions/_ask_me_modal.html" . %]
    [% template "constructions/_ask_expense_modal.html" . %]

    <div class="popup">
        <div class="close">x&nbsp;</div>
        <div class="content">
            [% range $i, $c := .sso_chars %]
            <a href="#" ng-click="OpenMarket([% $c.Id %])">[% $c.Label %]</a><br/>
            [% end %]
        </div>
    </div>

    <modal v-if="showMEModal" @close="showMEModal = false">
      <div class="me-list" slot="body">
        <label><input type="radio" value="0" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">0</span></label>
        <label><input type="radio" value="1" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">1</span></label>
        <label><input type="radio" value="2" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">2</span></label>
        <label><input type="radio" value="3" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">3</span></label>
        <label><input type="radio" value="4" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">4</span></label>
        <label><input type="radio" value="5" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">5</span></label>
        <label><input type="radio" value="6" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">6</span></label>
        <label><input type="radio" value="7" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">7</span></label>
        <label><input type="radio" value="8" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">8</span></label>
        <label><input type="radio" value="9" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">9</span></label>
        <label><input type="radio" value="10" v-model.number="ask.me" v-on:change="SaveME()"><span class="value">10</span></label>
      </div>
    </modal>

    <modal v-if="showQtyModal" @close="showQtyModal = false">
        <h3 slot="body">Qty</h3>
    </modal>

</div>

<script src="/assets/js/vue.js"></script>
<script src="/assets/js/component.type-select.js"></script>
<script src="/assets/js/component.modal.js"></script>
<script src="/assets/js/vue.filters.js"></script>
<script src="/assets/js/controller.constructions.js"></script>

<% template "base_foot" %>
<% end %>
